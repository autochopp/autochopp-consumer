<ion-header>
    <ion-navbar>
        <ion-title>Concluir Compra</ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding class="default-bg">
    <ion-list>
        <form [formGroup]="cardForm" (ngSubmit)="initBuyRequest()">
            <ion-item color="secondary">
                <ion-label floating color="dark">Nome do titular do cartão</ion-label>
                <ion-input type="text" formControlName="ownerName" name="ownerName"></ion-input>
                <ion-label floating color="danger" *ngIf="card.formErrors.ownerName as value">{{value}}</ion-label>
            </ion-item>

            <ion-item color="secondary">
                <ion-label floating color="dark">Data de nascimento</ion-label>
                <ion-datetime formControlName="bornDate" name="bornDate" displayFormat="DD/MM/YY"></ion-datetime>
            </ion-item>

            <ion-grid>
                <ion-row>
                    <ion-col col-5>
                        <ion-item color="secondary">
                            <ion-label floating color="dark">DDD</ion-label>
                            <ion-input type="text" formControlName="areaCode" name="areaCode"></ion-input>
                            <ion-label floating color="danger" *ngIf="card.formErrors.areaCode as value">{{value}}</ion-label>
                        </ion-item>
                    </ion-col>
                </ion-row>
            </ion-grid>

            <ion-grid>
                <ion-row>
                    <ion-col col-8>
                        <ion-item color="secondary">
                            <ion-label floating color="dark">Telefone</ion-label>
                            <ion-input type="text" formControlName="phoneNumber" name="phoneNumber"></ion-input>
                            <ion-label floating color="danger" *ngIf="card.formErrors.phoneNumber as value">{{value}}</ion-label>
                        </ion-item>
                    </ion-col>
                </ion-row>
            </ion-grid>

            <ion-item color="secondary">
                <ion-label floating color="dark">CPF do titular cartão</ion-label>
                <ion-input type="text" formControlName="ownerCPF" name="ownerCPF"></ion-input>
                <ion-label floating color="danger" *ngIf="card.formErrors.ownerCPF as value">{{value}}</ion-label>
            </ion-item>

            <ion-grid>
                <ion-row>
                    <ion-col col-7>
                        <ion-item color="secondary">
                            <ion-label floating color="dark">Número do cartão</ion-label>
                            <ion-input type="text" formControlName="cardNumber" name="cardNumber" (blur)="searchBrand()"></ion-input>
                            <ion-label floating color="danger" *ngIf="card.formErrors.cardNumber as value">{{value}}</ion-label>
                        </ion-item>
                    </ion-col>

                    <ion-col col-3>
                        <ion-item color="secondary">
                            <ion-label floating color="dark">CV</ion-label>
                            <ion-input type="text" formControlName="securityCode" name="securityCode"></ion-input>
                            <ion-label floating color="danger" *ngIf="card.formErrors.securityCode as value">{{value}}</ion-label>
                        </ion-item>
                    </ion-col>
                </ion-row>
            </ion-grid>

            <ion-grid>
                <ion-row>
                    <ion-col col-5>
                        <ion-item color="secondary">
                            <ion-label floating color="dark">Mês de expiração</ion-label>
                            <ion-input type="text" formControlName="expirationMonth" name="expirationMonth"></ion-input>
                        </ion-item>
                    </ion-col>
                    <ion-col col-5>
                        <ion-item color="secondary">
                            <ion-label floating color="dark">Ano de expiração</ion-label>
                            <ion-datetime formControlName="expirationYear" name="expirationYear" displayFormat="YYYY" min="2017" max="2032"></ion-datetime>
                        </ion-item>
                    </ion-col>
                </ion-row>
            </ion-grid>

            <div padding>
                <button ion-button type="submit" color="primary" block>Concluir Compra</button>
            </div>
        </form>
    </ion-list>
</ion-content>